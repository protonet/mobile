<%= will_paginate(search_results.hits) %>
<% i = 1 -%>
<% search_results.hits.each do |hit| -%>
<%
  tweet = hit.instance
  c = tweet.channels.first
  tweets = tweet.from_minutes_after(10,c.id) + [tweet] + tweet.from_minutes_before(10,c.id)
  highlights = hit.highlights(:message)
  if highlights && !highlights.empty?
    tweet.message = highlights.first.format { |phrase| search_highligh_tag(phrase) }
  end
-%>
  <%= render :partial => 'search/search_result',
    :locals => {
      :tweet     => tweet,
      :tweets    => tweets,
      :channel   => c,
      :pos       => i,
      :more_time => 10,
      :less_time => 10
    } %>
  <% i += 1 -%>
<% end -%>

<%= will_paginate(search_results.hits) %>
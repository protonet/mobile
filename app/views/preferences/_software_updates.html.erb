<h2>Updates</h2>
<p>It's recommended to update your node's software from time to time to avoid errors and to get latest enhancements.</p>

<h3>Info</h3>
<dl>
  <dt>Current version:</dt><dd><%= SystemRelease.current_version %>/<%= SystemRelease.current_type %></dd>
  <dt>Latest stable version:</dt><dd><%= SystemRelease.latest_version %></dd>
  <dt>Latest beta version:</dt><dd><%= SystemRelease.latest_beta_version %> <a class="hint" data-hover-hint="top" title="Please note that beta software may be unstable">(?)</a></dd>
  <dt>Stable update available:</dt><dd><%= raw(SystemRelease.most_recent? ? '<span class="off">no</span>' : '<span class="on">yes</span>') %></dd>
</dl>

<h3>Update to newer version</h3>
<%= form_tag(preferences_release_update_path, { :remote => true, 'data-type' => 'html', :class => "software-update" }) do %>
  <%= hidden_field_tag 'section', 'software_updates' %>
  <div class="form-field">
    <%= label_tag          :password, 'Your node SSH password:' %>
    <%= password_field_tag :password, nil %>
    <a data-hover-hint="top" class="hint" title="The password can be found on the 'Getting Started' paper which you received with your node">(?)</a>
  </div>
  <div class="form-field">
    <%= label_tag   :release, 'Select version:' %>
    <%= select_tag  :release, options_for_select(SystemRelease.last_releases.reverse.map{|c| ["#{c[0]} / #{c[1]}", c[0]] if c[0].to_i >= SystemRelease.current_version}.compact, SystemRelease.last_releases.reverse.find {|release| release[1].strip! == "STABLE"}[0]) %>
  </div>
  <%= button "Update" %> <span class="loading-hint">Please wait. This will take a few minutes.</span>
  <a id="show-release-update-progress">Show update progress</a>
<%- end %>

<h3>Old log files</h3>
<a id="show-last-release-update-log">Show last update log</a> and send it to the protonet support team if needed.
<div id="release-update-progress-console" class="quake-style-console" data-url="<%= url_for preferences_release_update_progress_path %>">
    <div class="quake-style-console-content"></div>
    <%= form_tag(preferences_send_log_to_support_team_path, {
      :remote     => true,
      'class'     => 'single-button-form'
    }) do -%>
      <%= button "Send log to protonet support", :id => "send-to-protonet-support" %>
    <%- end %>
    <div id="sent-feedback"></div>
</div>

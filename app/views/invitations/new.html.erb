<%= render "shared/nav_users"%>
<output class="content" data-tab="users">
  <%= form_for(@invitation, :remote => true, :html => { "data-type" => 'html' }) do |f| %>
    <h2><%= t("invitations.headline_overview") %> <a data-hover-hint="top" title="<%= t("invitations.hint_rights") %>" class="hint">(?)</a></h2>
    
    <%- unless SystemPublishToWeb.status %>
      <div class="form-field">
        <p class="info-message">
          <strong><%= t("headline_please_note") %></strong>
          <%= raw(t("invitations.text_web_publishing_off")) %>
        </p>
      </div>
    <%- end %>
    
    <div class="form-field">
      <%= f.label :first_name, t("users.label_first_name") %>
      <%= f.text_field(:first_name, {:autofocus => true}) %>
    </div>
    
    <div class="form-field">
      <%= f.label :last_name, t("users.label_last_name") %>
      <%= f.text_field(:last_name) %>
    </div>
    
    <div class="form-field">
      <%= f.label :email, t("users.label_email") %>
      <%= f.text_field(:email, {:type => "email", :value => @invitee_email || @invitation.email }) %>
    </div>
    
    <div class="form-field">
      <label><%= t("users.label_user_type") %></label>
      <span class="radio-group">
        <label>
          <%= f.radio_button(:role, 'invitee') %> <%= t("users.label_user_with_restricted_rights") %>
          <a data-hover-hint="top" title="<%= raw(t("users.hint_user_with_restricted_rights")) %>" class="hint">(?)</a>
        </label>
        <label>
          <%= f.radio_button(:role, 'user') %> <%= t("users.label_user_default") %>
          <a data-hover-hint="top" title="<%= raw(t("users.hint_user_default")) %>" class="hint">(?)</a>
        </label>
        <label>
          <%= f.radio_button(:role, 'admin') %> <%= t("users.label_user_with_administration_rights") %>
          <a data-hover-hint="top" title="<%= raw(t("users.hint_user_with_administration_rights")) %>" class="hint">(?)</a>
        </label>
        <span class="hint">
          <%= raw(t("users.link_user_types_learn_more")) %>
        </span>
      </span>
    </div>
    
    <div class="form-field channels">

     <label for="invitation_channel"><%= raw(t("users.label_channels")) %> <a data-hover-hint="top" title="<%= t("users.hint_channels") %>" class="hint">(?)</a></label>
      <ul>
      <%- @channels.sort_by(&:display_name).each do |channel| %>
        <li class="channel-checkboxes">
          <label class="checkbox-row">
            <%= check_box_tag "invitation[channel_ids][]", channel.id, @channels.size == 1 || params[:channel_id].to_i == channel.id, :id => dom_id(channel, "invitation") %>
            <%= channel.display_name %>
          </label>
        </li>
      <%- end %>
      </ul>
    </div>
    <%= button t("label_next_step") %>
  <% end %>
  
  <script type="protonet/template" id="user-roles-table-template">
    <%= render :partial => 'shared/user_roles_table' %>
  </script>
</output>

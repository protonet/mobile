<section class="channels-page subpage">
  <%= render :partial => "header" %>
  <div class="modal-window-scroll-content">
    <aside>
      <ul>
        <%- Network.all.each do |n| %>
          <%- if Network.all.size > 1%>
            <li class="network-separator">
              Network: <strong><%= n.name %></strong>
              <p><%= n.channels.real.size %> channels</p>
            </li>
          <%- end %>
          <%- n.channels.real.each do |c| -%>
            <li class="<%= 'selected' if @selected_channel && c.id == @selected_channel.id %>">
              <a href="/channels/<%= c.id %>" data-tab="channels">
                <strong>@<%= c.name %></strong> <%= channel_icons(c) %>
                <%- c.random_users(5).each do |u| %>
                  <%= avatar(u, :width => 20, :height => 20, 'data-hover-hint' => 'top', :title => u.display_name) %>
                <%- end %>
                <%= raw("<i>+ #{c.users.registered.size - 5} more</i>") if c.users.registered.size > 5 %>
              </a>
            </li>
          <%- end -%>
        <%- end %>
      </ul>
    </aside>
    <output data-tab="channels" class="content">
      <%- if @selected_channel %>
        <%= render :partial => 'channel_details', :locals => { :channel => @selected_channel } %>
      <%- else %>
        <p class="hint">Please choose a channel from the left or <%= link_to "click here", new_channel_path, :class => 'promotion-link' %> to create a new one.</p>
      <%- end %>
    </output>
  </div>
</section>